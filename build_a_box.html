<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Build your own 12-cookie box from Daug's Desserts. Choose your flavors, add a gift note, and checkout securely online.">
    <link rel="canonical" href="{{PAGE_URL}}">

    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Daug's Desserts">
    <meta property="og:title" content="Build Your Box â€¢ 12 Cookies | Daug's Desserts">
    <meta property="og:description" content="Pick exactly 12 cookies, add a gift note, and checkout securely.">
    <meta property="og:url" content="https://daugsdesserts.com/build_a_box.html">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Build Your Box â€¢ 12 Cookies | Daug's Desserts">
    <meta name="twitter:description" content="Pick exactly 12 cookies, add a gift note, and checkout securely.">

  <title>Build Your Box â€¢ 12 Cookies</title>

<!-- Google Tag Manager -->
<script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K9NC5DPG');
</script>
<!-- End Google Tag Manager -->

<!-- Fonts -->


  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            serif: ['Poppins', 'sans-serif'],
            sans: ['Poppins', 'sans-serif'],
          },
          colors: {
            brand: {
              green: '#3c6e47',
              yellow: '#f3bb41',
            },
            cream: {
              50: '#fdfcfb',
              100: '#faf8f5',
            },
            brown: {
              700: '#6b5435',
              800: '#4a3a24',
            },
          }
        }
      }
    }
  </script>

  <style>
    .header-buy-btn {
      background-color: #ffffff !important;
      color: #000000 !important;
      padding: 8px 16px;
      border-radius: 6px;
      font-family: 'Poppins', sans-serif;
      font-weight: 800;
      display: inline-block;
    }
    .header-buy-btn:hover { background-color: #f2f2f2 !important; }
    .header-logo {
      font-family: 'Playfair Display', serif !important;
      font-weight: 800 !important;
      text-transform: lowercase;
      letter-spacing: -0.5px;
    }
    .hamburger span {
      display: block;
      width: 18px;
      height: 2px;
      margin: 3px 0;
      background: white;
      border-radius: 2px;
    }
  </style>
</head>

<body class="scroll-smooth bg-cream-50">

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K9NC5DPG"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


<!-- GLOBAL HEADER (matches your style) -->
<header class="sticky top-0 z-50 bg-brand-green">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="relative flex items-center justify-between h-16">

      <!-- Left: Hamburger (placeholder) -->
      <button class="flex items-center gap-2 text-white hover:opacity-80 transition-opacity" aria-label="Menu">
        <div class="hamburger">
          <span></span><span></span><span></span>
        </div>
        <span class="text-sm font-bold font-sans">Menu</span>
      </button>

      <!-- Center Logo -->
      <a href="index.html"
         class="header-logo absolute left-1/2 -translate-x-1/2 text-2xl text-white">
        Daug's Desserts
      </a>

      <!-- Right: Order Now -->
      <a href="/#packs" class="header-buy-btn text-sm font-medium">
        Order Now
      </a>

    </div>
  </div>
</header>

<!-- MENU INDEX (matches your style) -->
<div class="sticky top-16 z-40 bg-white border-b border-gray-200 shadow-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <nav class="flex gap-8 py-4 overflow-x-auto">
      <a href="/#packs" class="text-sm font-medium text-gray-700 hover:text-brand-yellow whitespace-nowrap">
        Cookie Boxes
      </a>
      <a href="/#daily" class="text-sm font-medium text-gray-700 hover:text-brand-yellow whitespace-nowrap">
        Our Cookies
      </a>
      <a href="build_a_box.html" class="text-sm font-bold text-brand-green whitespace-nowrap">
        Build Your Box
      </a>
    </nav>
  </div>
</div>

<!-- HERO / CONTROL PANEL -->
<section class="py-16 bg-cream-100 border-b border-cream-300">
  <div class="max-w-6xl mx-auto px-4 grid lg:grid-cols-2 gap-12 items-center">

    <!-- Left: Draft board -->
    <div class="bg-white rounded-2xl shadow-lg p-8 border border-cream-200">
      <h1 class="font-serif text-5xl font-bold text-brown-800 mb-3">Build Your Box</h1>
      <p class="text-brown-700 text-lg leading-relaxed mb-6">
        Draft your dream lineup. Lock in exactly <strong>12 cookies</strong>. Then checkout.
      </p>

      <!-- Counter + Progress -->
      <div class="mt-2">
        <div class="flex items-center justify-between mb-2">
          <span class="font-bold text-brown-800" id="counter">0/12 selected</span>
          <span class="text-sm text-brown-700" id="status">Pick 12 to unlock checkout.</span>
        </div>
        <div class="w-full h-3 rounded-full bg-white border border-cream-300 overflow-hidden">
          <div id="progress" class="h-3 bg-brand-yellow w-0"></div>
        </div>
      </div>

      <!-- Actions -->
      <div class="flex gap-3 mt-6">
        <button id="randomize"
          class="px-6 py-3 rounded-md font-semibold bg-brand-green text-white hover:opacity-90 transition w-full">
          ðŸŽ² Roll the Dice - Mix It Up!
        </button>
        <button id="reset"
          class="px-6 py-3 rounded-md font-semibold bg-white border border-cream-300 text-brown-800 hover:opacity-90 transition w-full">
          Reset
        </button>
      </div>

      <!-- Checkout -->
      <button id="checkout"
        class="mt-3 px-6 py-3 rounded-md font-semibold bg-brand-yellow text-white hover:opacity-90 transition w-full disabled:opacity-40 disabled:cursor-not-allowed"
        disabled>
        Checkout â†’
      </button>

      <p class="text-xs text-brown-700 mt-3">
        Your exact cookie lineup will be attached to your order at checkout.
      </p>

      <!-- Tiny error area -->
      <p id="errorMsg" class="hidden text-red-600 font-semibold mt-3"></p>
    </div>

    <!-- Right: Image -->
    <div class="rounded-2xl shadow-lg overflow-hidden">
      <img src="/images/Chocolate_Chip.webp" alt="Cookies" class="w-full h-full object-cover">
    </div>

  </div>
</section>

<!-- COOKIE GRID -->
<section class="py-12 bg-cream-50 border-t border-cream-200">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="font-serif text-3xl font-bold text-brown-800 mb-6">Pick Your Cookies</h2>
    <p class="text-brown-700 mb-6">
      Add cookies until you hit <strong>12</strong>. You can mix any way you want.
    </p>

    <div id="cookieGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </div>
</section>

<!-- GIFT NOTE -->
<section class="py-12 bg-cream-50 border-t border-cream-200">
  <div class="max-w-3xl mx-auto px-4">
    <h2 class="font-serif text-3xl font-bold text-brown-800 mb-4">Add a Gift Note (Optional)</h2>
    <p class="text-brown-700 mb-4">
      Want to personalize your box? Add a short note. Weâ€™ll include it with your order.
    </p>
    <textarea id="giftNote" rows="4"
      class="w-full p-3 rounded-lg border border-cream-300 focus:outline-none focus:ring-2 focus:ring-brand-yellow"
      placeholder="To: / From: / Message..."></textarea>
  </div>
</section>

<!-- Footer (keep your existing footer if you want; this is a clean placeholder) -->
<footer class="text-cream-100 py-12 bg-black border-t-2" style="border-color:#f3bb41;">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 md:grid-cols-5 gap-12">
      <div>
        <h3 class="font-serif text-2xl font-bold mb-4">Daug's Desserts</h3>
        <p class="text-white text-opacity-90 text-sm leading-relaxed">
          We love seeing you smile with us. Message us your pictures to enter our raffle for a free box of cookies! @daugsdesserts
        </p>
      </div>

      <div>
        <h4 class="font-semibold mb-4">Smile With Us</h4>
        <ul class="space-y-2 text-sm text-white text-opacity-90">
          <li><a href="/#daily" class="hover:opacity-80 transition-opacity">Cookie Flavors</a></li>
          <li><a href="/#packs" class="hover:opacity-80 transition-opacity">Build Your Box</a></li>
        </ul>
      </div>

      <div>
        <h4 class="font-semibold mb-4">Delivery Done Right</h4>
        <ul class="space-y-2 text-sm text-white text-opacity-90">
          <li><a href="#" class="hover:opacity-80 transition-opacity">Our Story</a></li>
          <li><a href="#" class="hover:opacity-80 transition-opacity">Catering</a></li>
          <li><a href="#" class="hover:opacity-80 transition-opacity">Our Blog</a></li>
        </ul>
      </div>

      <div>
        <h4 class="font-semibold mb-4">
          <a href="mailto:daugsdessertsmarketing@gmail.com" class="hover:opacity-80 transition-opacity">
            Contact Us
          </a>
        </h4>
        <ul class="space-y-2 text-sm text-white text-opacity-90">
          <li><a href="contact.html" class="hover:opacity-80 transition-opacity">Contact Us</a></li>
          <li><a href="#" class="hover:opacity-80 transition-opacity">Allergens & Ingredients</a></li>
          <li><a href="#" class="hover:opacity-80 transition-opacity">Terms & Conditions</a></li>
          <li><a href="#" class="hover:opacity-80 transition-opacity">Privacy Policy</a></li>
        </ul>
      </div>

      <div>
        <h4 class="font-semibold mb-4">Follow Us</h4>
        <ul class="space-y-2 text-sm text-white text-opacity-90">
          <li><a href="https://www.instagram.com/daugsdesserts/" class="hover:opacity-80 transition-opacity">Instagram</a></li>
          <li><a href="https://www.facebook.com/profile.php?id=61575046289470" class="hover:opacity-80 transition-opacity">Facebook</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-white border-opacity-20 mt-8 pt-8 text-center text-sm text-white text-opacity-90">
      <p>&copy; 2025 Daug's Desserts. All Rights Reserved.</p>
    </div>
  </div>
</footer>

<script>
  const API_BASE = "https://daugs-stripe-backend.daugsdessertsmarketing.workers.dev";

  function getSelectionFromUI() {
    // TODO: Replace with your real UI logic
    // Return an object like: { "Chocolate Chip": 4, "Triple Chocolate": 8 }
    const selection = {};
    document.querySelectorAll("[data-cookie-name]").forEach((row) => {
      const name = row.getAttribute("data-cookie-name");
      const qty = parseInt(row.querySelector("input").value || "0", 10);
      if (qty > 0) selection[name] = qty;
    });
    return selection;
  }

  function sumSelection(selection) {
    return Object.values(selection).reduce((a, b) => a + b, 0);
  }

  async function startCheckout() {
    const selection = getSelectionFromUI();
    const total = sumSelection(selection);

    if (total !== 12) {
      alert(`Your box must be exactly 12 cookies. You currently have ${total}.`);
      return;
    }

    const giftNote = {
      to: document.querySelector('[name="to"]')?.value || "",
      from: document.querySelector('[name="from"]')?.value || "",
      message: document.querySelector('[name="message"]')?.value || "",
    };

    const res = await fetch(`${API_BASE}/create-checkout-session`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ selection, giftNote }),
    });

    const data = await res.json();
    if (!res.ok) {
      alert(data.error || "Checkout error.");
      return;
    }

    window.location.href = data.url; // redirect to Stripe Checkout
  }
</script>

<button onclick="startCheckout()" class="px-6 py-3 rounded-md font-semibold bg-brand-yellow text-white">
  Checkout
</button>


<script>
  // âœ… Your Cloudflare Worker endpoint
  const API_CREATE_SESSION_URL =
    "https://daugs-stripe-backend.daugsdessertsmarketing.workers.dev/create-checkout-session";

  // âœ… Only 12-cookie boxes
  const REQUIRED_COUNT = 12;
  const BOX_TYPE = "dozen"; // must match Worker BOXES key

  // Cookie menu (rename these EXACTLY how you want them in fulfillment)
  const COOKIES = [
    { name: "Chocolate Chip", desc: "Classic. Soft-baked. Premium chips." },
    { name: "Gold Rush Sugar Cookie", desc: "Golden sweetness. Crowd favorite." },
    { name: "Triple Chocolate", desc: "Deep cocoa. Big mood." },
    { name: "Spicy Oatmeal", desc: "Warm spice. Cozy bite." },
    { name: "Caramel Macchiato", desc: "Coffee-forward. Smooth finish." },
    { name: "Ooey Gooey Butter", desc: "Soft, rich, unapologetic." },
  ];

  // Selection state: { "Chocolate Chip": 4, ... }
  let selection = {};

  const grid = document.getElementById("cookieGrid");
  const counter = document.getElementById("counter");
  const status = document.getElementById("status");
  const progress = document.getElementById("progress");
  const checkoutBtn = document.getElementById("checkout");
  const errorMsg = document.getElementById("errorMsg");

  function totalSelected() {
    return Object.values(selection).reduce((sum, n) => sum + Number(n || 0), 0);
  }

  function setError(msg) {
    if (!msg) {
      errorMsg.classList.add("hidden");
      errorMsg.textContent = "";
      return;
    }
    errorMsg.textContent = msg;
    errorMsg.classList.remove("hidden");
  }

  function updateUI() {
    const total = totalSelected();
    counter.textContent = `${total}/${REQUIRED_COUNT} selected`;
    progress.style.width = `${Math.min(100, (total / REQUIRED_COUNT) * 100)}%`;

    if (total < REQUIRED_COUNT) status.textContent = `Pick ${REQUIRED_COUNT - total} more to unlock checkout.`;
    if (total === REQUIRED_COUNT) status.textContent = `âœ… Box locked. Ready to checkout.`;

    checkoutBtn.disabled = total !== REQUIRED_COUNT;
  }

  function render() {
    grid.innerHTML = "";
    COOKIES.forEach((c) => {
      const qty = selection[c.name] || 0;

      const card = document.createElement("div");
      card.className = "bg-white rounded-2xl shadow-lg p-6 border border-cream-200";

      card.innerHTML = `
        <div class="flex items-start justify-between gap-3">
          <div>
            <h3 class="font-bold text-brown-800 text-xl">${c.name}</h3>
            <p class="text-brown-700 mt-1">${c.desc}</p>
          </div>
          <span class="text-sm font-bold text-brand-green bg-cream-100 px-3 py-1 rounded-full">${qty}</span>
        </div>

        <div class="flex gap-3 mt-5">
          <button class="w-full px-4 py-3 rounded-md font-semibold bg-white border border-cream-300 text-brown-800 hover:opacity-90 transition" data-action="minus" aria-label="Remove one">
            âˆ’
          </button>
          <button class="w-full px-4 py-3 rounded-md font-semibold bg-brand-yellow text-white hover:opacity-90 transition" data-action="plus" aria-label="Add one">
            +
          </button>
        </div>
      `;

      card.querySelector('[data-action="minus"]').onclick = () => {
        if (qty > 0) {
          selection[c.name] = qty - 1;
          if (selection[c.name] === 0) delete selection[c.name];
          setError("");
          render();
        }
      };

      card.querySelector('[data-action="plus"]').onclick = () => {
        if (totalSelected() < REQUIRED_COUNT) {
          selection[c.name] = qty + 1;
          setError("");
          render();
        }
      };

      grid.appendChild(card);
    });

    updateUI();
  }

  function randomDraft() {
    selection = {};
    let remaining = REQUIRED_COUNT;

    while (remaining > 0) {
      const pick = COOKIES[Math.floor(Math.random() * COOKIES.length)].name;
      selection[pick] = (selection[pick] || 0) + 1;
      remaining--;
    }
    setError("");
    render();
  }

  document.getElementById("reset").onclick = () => {
    selection = {};
    setError("");
    render();
  };

  document.getElementById("randomize").onclick = () => randomDraft();

  checkoutBtn.onclick = async () => {
    try {
      setError("");

      const giftNote = (document.getElementById("giftNote")?.value || "").slice(0, 400);

      const payload = {
        boxType: BOX_TYPE,
        selection,
        giftNote,
      };

      const res = await fetch(API_CREATE_SESSION_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      });

      const data = await res.json();

      if (!res.ok) {
        setError(data.error || "Checkout failed.");
        return;
      }

      if (data.url) {
        window.location.href = data.url;
      } else {
        setError("No checkout URL returned.");
      }
    } catch (e) {
      setError("Network error starting checkout. Try again.");
    }
  };

  render();
</script>

</body>
</html>
